{"mappings":"AASmBA,SAASC,cAAc,sBAAzC,MACWC,EAAYF,SAASC,cAAc,cACnCE,EAAWH,SAASC,cAAc,eAClCG,EAAYJ,SAASC,cAAc,gBACnCI,EAAaL,SAASC,cAAc,uBAC1CG,EAAUE,QAAW,KACnBJ,EAAUK,MAAMC,WAAa,MAAM,EAGrCL,EAASG,QAAW,KAClBJ,EAAUK,MAAMC,WAAa,IAAI,EAGnCH,EAAWC,QAAW,KACpBF,EAAUK,SACH,GAmFbC,mBAAmBC,MAAMC,IACvB,GAAIA,EAAM,CAER,MAAMC,EAAKC,cACLC,EAAUC,IAAIH,EAAI,SAAWD,EAAKK,IAAM,aAC9CC,QAAQH,GAASI,IACf,MAAMC,EAAOD,EAASE,MAGhBV,KAAKW,YAAYL,IACdN,KAAKW,YAAYC,MAClBJ,EAASE,MAEjBG,kBAAkBC,mBAAmB,aAAc,MAAML,SACzDM,aAAaC,UAAUC,IAAI,mBAC3BC,UAAUF,UAAUG,OAAO,mBAC3BC,WAAWJ,UAAUG,OAAO,WAAW,G","sources":["src/js/registration.js"],"sourcesContent":["//  opem modal\n//  function openForm() {\n//   document.getElementById(\"myForm\").style.display = \"block\";\n// }\n\n// function closeForm() {\n//   document.getElementById(\"myForm\").style.display = \"none\";\n// }\n \n const loginText = document.querySelector(\".title-text .login\");\n      const loginForm = document.querySelector(\"form.login\");\n      const loginBtn = document.querySelector(\"label.login\");\n      const signupBtn = document.querySelector(\"label.signup\");\n      const signupLink = document.querySelector(\"form .signup-link a\");\n      signupBtn.onclick = (()=>{\n        loginForm.style.marginLeft = \"-50%\";\n        \n      });\n      loginBtn.onclick = (()=>{\n        loginForm.style.marginLeft = \"0%\";\n        \n      });\n      signupLink.onclick = (()=>{\n        signupBtn.click();\n        return false;\n      });\n\n\n// Create user\n\nfunction createUser(event) {\n  event.preventDefault();\n    const formElements = {\n    username: event.currentTarget.elements.username.value,\n    email: event.currentTarget.elements.email.value,\n    password: event.currentTarget.elements.password.value,\n    \n  };\n  // Створення користувача за поштою та емейлом\n  createUserWithEmailAndPassword(\n    auth,\n    formElements.email,\n    formElements.password,\n    formElements.username\n  )\n    .then(userCredential => {\n      // Signed in\n      const user = userCredential.user;\n      alert(`Welcome to Filmoteka, ${formElements.username}!`);\n      modal.classList.toggle('visually-hidden');\n      return user;\n    })\n    .then(user => {\n      set(ref(database, 'users/' + user.uid), {\n        username: formElements.username,\n        email: formElements.email,\n        uid: user.uid,\n      });\n    })\n    .catch(error => {\n      const errorCode = error.code;\n      const errorMessage = error.message;\n      alert(errorMessage);\n    });\n  event.currentTarget.reset();\n}\n\n// Функция входу користувача та отримання його данних\nfunction getUser(event) {\n  event.preventDefault();\n  const formElements = {\n    email: event.currentTarget.elements.email.value,\n    password: event.currentTarget.elements.password.value,\n  };\n  signInWithEmailAndPassword(auth, formElements.email, formElements.password)\n    .then(userCredential => {\n      // Signed in\n      const user = userCredential.user;\n\n      const db = getDatabase();\n      const nameRef = ref(db, 'users/' + user.uid + '/username');\n      onValue(nameRef, snapshot => {\n        const name = snapshot.val();\n\n        const user = {\n          id: auth.currentUser.uid,\n          email: auth.currentUser.email,\n          name: snapshot.val(),\n        };\n        alert(`Welcome back, ${name}`);\n\n        document.location.href = 'library.html'; //Перехід на сторінку Library після авторизації\n        logoutBtn.classList.toggle('visually-hidden');\n        libraryBtn.classList.remove('disabled');\n\n        modal.classList.toggle('visually-hidden');\n      });\n      return user;\n    })\n    .catch(error => {\n      const errorCode = error.code;\n      const errorMessage = error.message;\n      alert(errorMessage);\n    });\n}\n\nconst authCheking = () => {\n  onAuthStateChanged(auth, user => {\n    if (user) {\n      //Getting users name\n      const db = getDatabase();\n      const nameRef = ref(db, 'users/' + user.uid + '/username');\n      onValue(nameRef, snapshot => {\n        const name = snapshot.val();\n\n        const userIn = {\n          id: auth.currentUser.uid,\n          email: auth.currentUser.email,\n          name: snapshot.val(),\n        };\n        userNameContainer.insertAdjacentHTML('afterbegin', `<p>${name}</p>`);\n        openModalBtn.classList.add('visually-hidden');\n        logoutBtn.classList.remove('visually-hidden');\n        libraryBtn.classList.remove('disabled');\n      });\n\n      // ...\n    }\n  });\n};\n\nauthCheking();\n//Функція виходу зі сторінки користувача\nfunction logOutUser(event) {\n  signOut(auth)\n    .then(() => {\n      document.location.href = 'index.html';\n\n      // Sign-out successful.\n    })\n    .catch(error => {\n      // An error happened.\n      const errorCode = error.code;\n      const errorMessage = error.message;\n      alert(errorMessage);\n    });\n}\n\n\n\n// export const modalOpenRagister = openForm();\n// export const modalCloseRagister = closeForm()"],"names":["document","querySelector","$d166cb0aea2af80c$var$loginForm","$d166cb0aea2af80c$var$loginBtn","$d166cb0aea2af80c$var$signupBtn","$d166cb0aea2af80c$var$signupLink","onclick","style","marginLeft","click","onAuthStateChanged","auth","user","db","getDatabase","nameRef","ref","uid","onValue","snapshot","name","val","currentUser","email","userNameContainer","insertAdjacentHTML","openModalBtn","classList","add","logoutBtn","remove","libraryBtn"],"version":3,"file":"index.c2120fe5.js.map"}